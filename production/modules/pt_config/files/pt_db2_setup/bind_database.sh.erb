#!/bin/sh

DB2_TYPE=<%= db2_type %>
UNICODE_DB=<%= unicode_db %>
DB2_SQLLIB_DIR=<%= db2_sqllib_dir %>

db2 update cli cfg for section COMMON using IGNOREWARNINGS "1"
db2 update cli cfg for section COMMON using DISABLEKEYSETCURSOR "1"

db2 CONNECT TO <%= db2_database_name %> USER <%= db2_user_name %> using <%= db2_user_pwd %>
if [ $? -eq 0 ]; then
  if [ "$DB2_TYPE" == "DB2ODBC" ]; then
    if [ $UNICODE_DB -eq 1 ]; then
      db2 bind <%= ps_home_dir %>/bin/sqr/DB2/bin/dbcalls.bnd encoding unicode blocking all grant public sqlerror continue
    else
      db2 bind <%= ps_home_dir %>/bin/sqr/DB2/bin/dbcalls.bnd blocking all grant public sqlerror continue
    fi
    cd ${DB2_SQLLIB_DIR}/bnd && db2 bind @ddcsmvs.lst blocking all sqlerror continue grant public
  else
    db2 bind <%= ps_home_dir %>/bin/sqr/DBX/bin/dbcalls.bnd
  fi
  cd ${DB2_SQLLIB_DIR}/bnd && db2 bind @db2cli.lst grant public
  cd ${DB2_SQLLIB_DIR}/bnd && db2 bind @db2ubind.lst grant public
  echo
fi
